<ol class="breadcrumb hidden-xs">
  <li><%= link_to "Home", root_path %></li>
  <% if params[:category] %>
    <li><%= link_to "Collection", products_path %></li>
    <li class="active"><%= params[:category].titleize.gsub(/-/, " ") %></li>
  <% else %>
    <li class="active">Collection</li>
  <% end %>
</ol>

<h1><%= params[:category] ? params[:category].titleize.gsub(/-/, " ") : 'Collection' %></h1>

<div class="row">
  <% @products.each do |product| %>
    <% next if product.nil? or product.images.first.nil? %>
    <div class="col-xs-6 col-sm-6 col-lg-3 col-md-3">
      <div class="thumbnail">
        <a href="<%= product_path(slug: product.slug, category: product.category.downcase) %>">
          <% if product.images.first %>
            <%= cl_image_tag product.images.first.cloudinary_ref,
                          alt: "#{product.name}",
                          height: 500,
                          width: 275,
                          crop: :pad,
                          format: :png
            %>
          <% end %>
          <div class="caption">
            <h6 class="text-center"><%= product.name.titleize %></h6>
          </div>
        </a>
      </div>
    </div>
  <% end %>
</div>

<script>
function equalHeight(group) {
    tallest = 0;
    group.each(function() {
        thisHeight = $(this).height();
        if(thisHeight > tallest) {
            tallest = thisHeight;
        }
    });
    group.each(function() { $(this).height(tallest); });
}

$(document).ready(function() {
    equalHeight($(".thumbnail"));
});
</script>